<div class="login-page-container">
    <div class="form-card">
        
        <h2 class="form-title">{{ isLoginMode ? 'Iniciar SesiÃ³n' : 'Crear Cuenta' }}</h2>

        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">
            
            <div class="input-group">
                <label for="email">Correo ElectrÃ³nico</label>
                <input 
                    id="email" 
                    type="email" 
                    formControlName="email" 
                    placeholder="ejemplo@correo.com"
                >
                <div class="error-message-placeholder">
                    <div *ngIf="loginForm.get('email')?.invalid && loginForm.get('email')?.touched" class="error-message">
                        Por favor, introduce un email vÃ¡lido.
                    </div>
                </div>
            </div>

            <div class="input-group">
                <label for="password">ContraseÃ±a</label>
                <div class="password-input-wrapper">
                    <input 
                        id="password" 
                        formControlName="password" 
                        placeholder="ContraseÃ±a"
                        [type]="passwordVisible && !isLoginMode ? 'text' : 'password'"
                    >
                    <span class="password-toggle-icon" 
                          *ngIf="!isLoginMode" 
                          (click)="togglePasswordVisibility()">
                        {{ passwordVisible ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
                    </span>
                </div>
                <div class="error-message-placeholder">
                    <div *ngIf="loginForm.get('password')?.invalid && loginForm.get('password')?.touched" class="error-message">
                        La contraseÃ±a debe tener al menos 6 caracteres.
                    </div>
                </div>
            </div>

            <div class="input-group" *ngIf="!isLoginMode">
                <label for="confirm-password">Confirmar ContraseÃ±a</label>
                <div class="password-input-wrapper">
                    <input 
                        id="confirm-password" 
                        formControlName="passwordConfirm" 
                        placeholder="Confirmar ContraseÃ±a"
                        [type]="passwordConfirmVisible ? 'text' : 'password'"
                    >
                    <span class="password-toggle-icon" 
                          (click)="togglePasswordConfirmVisibility()">
                         {{ passwordConfirmVisible ? 'ğŸ™ˆ' : 'ğŸ‘ï¸' }}
                    </span>
                </div>
                
                <div class="error-message-placeholder">
                    <div *ngIf="loginForm.hasError('passwordsDoNotMatch')" class="error-message">
                        Las contraseÃ±as no coinciden.
                    </div>
                </div>
            </div>
            
            <div *ngIf="error" class="error-message global-error">
                {{ error }}
            </div>

            <button type="submit" [disabled]="loginForm.invalid || isLoading" class="submit-button">
                <span *ngIf="!isLoading">{{ isLoginMode ? 'Iniciar SesiÃ³n' : 'Registrarse' }}</span>
                <span *ngIf="isLoading">Cargando...</span>
            </button>

        </form>

        <p class="toggle-link">
            {{ isLoginMode ? 'Â¿No tienes una cuenta?' : 'Â¿Ya tienes una cuenta?' }} 
            <a (click)="toggleMode()" class="link-register">
                {{ isLoginMode ? 'RegÃ­strate aquÃ­' : 'Inicia sesiÃ³n aquÃ­' }}
            </a>
        </p>

    </div>
</div>