<div class="projects-container">
    <div class="header">
        <h2>Mis Proyectos ({{ totalProjects }})</h2>
        <button 
            class="new-project-btn" 
            (click)="toggleCreationMode()">
            {{ isCreating ? 'Cancelar' : 'Nuevo Proyecto' }}
        </button>
    </div>

    <div *ngIf="isCreating" class="creation-form-wrapper">
        <app-nuevo-proyecto
            (creationCompleted)="handleCreationResult($event)">
        </app-nuevo-proyecto>
    </div>

    <!-- â† NUEVO: Formulario de ediciÃ³n -->
    <div *ngIf="isEditing && editingProject" class="creation-form-wrapper">
        <app-nuevo-proyecto
            [projectToEdit]="editingProject"
            (creationCompleted)="handleCreationResult($event)">
        </app-nuevo-proyecto>
    </div>

    <div *ngIf="!isCreating && !isEditing" class="project-list-grid">
        <div *ngIf="projects.length === 0" class="empty-state">
            <p>No tienes proyectos aÃºn.</p>
            <button class="btn primary-action" (click)="toggleCreationMode()">Comenzar</button>
        </div>

        <div *ngFor="let project of projects" class="project-card">
            <div class="project-content">
                <h3>{{ project.name }}</h3>
                <p>{{ project.description }}</p>
                <span class="status" [ngClass]="project.status">{{ project.status }}</span>
                <span *ngIf="project.dueDate" class="due-date">ğŸ“… {{ project.dueDate }}</span>
            </div>
            
            <!-- â† NUEVO: Botones de acciÃ³n -->
            <div class="project-actions">
                <button class="btn-edit" (click)="editProject(project)" title="Editar">
                    âœï¸
                </button>
                <button class="btn-delete" (click)="confirmDelete(project)" title="Eliminar">
                    ğŸ—‘ï¸
                </button>
            </div>
        </div>
    </div>

    <!-- â† NUEVO: Modal de confirmaciÃ³n de eliminaciÃ³n -->
    <div *ngIf="showDeleteConfirm" class="modal-overlay" (click)="cancelDelete()">
        <div class="modal-content" (click)="$event.stopPropagation()">
            <h3>Â¿Eliminar proyecto?</h3>
            <p>Â¿EstÃ¡s seguro de que deseas eliminar "{{ projectToDelete?.name }}"?</p>
            <p class="warning">Esta acciÃ³n no se puede deshacer.</p>
            <div class="modal-actions">
                <button class="btn-cancel" (click)="cancelDelete()">Cancelar</button>
                <button class="btn-confirm-delete" (click)="deleteProject()">Eliminar</button>
            </div>
        </div>
    </div>
</div>